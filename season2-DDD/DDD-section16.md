# 大規模な構造   

課題A　巨大なシステムを扱いやすい大きさの凝集したモジュールに細分化したが、設計の組織化ができていないため、何をすべきかを探し出すのが難しくなっていた。
解A　全体としてのモデルの構造を示す。（設計が従うべき構造）
　 　設計の包括的なルールの集合

課題A'　設計全体にまたがるパターンにおいてどのような役割を果たすかが明示されないと、各コンテキストの整合性が取れなくなる。
解A’　　包括的な原則を作る。

手段A　意味ある言葉見つからなかった。
場面A　モデルの開発に不自然な制約を強いることなく、システムを大幅に明確化する構造が見つけられた時。無理に作る必要はない。

# 進化する秩序
-特になし

# システムのメタファ
課題B　ソフトウェアの設計は抽象的なため、システムを理解して、全体としてのシステムの見方を共有するための具体的な方法を得られにくい。
解B　設計全体の中心的な主題を伝え、チームメンバ全員で共有される理解を提供するメタファを見出す。
手段B　メタファは厳密なものではなく、モデルを大まかな方法でマッピングできるため、複数の境界付けられたコンテキスト間の作業の調整に資する。

結論
システムを表す具体的な類比が登場し、チームメンバでイメージを共有できるならそれを大規模な構造として採用。
そのメタファを中心に設計を構成して、ユビキタス言語に取り入れる。
但し、メタファは不正確さも持つので、拡大しすぎたり不適切でないかは常にチェックが必要。

# 責務のレイヤ
レイヤ：システムにおける区画。下位レイヤのことは知っているが、上位レイヤのことは知らない。

課題C　巨大な構造では様々な階層が形成され、独自の変化が起こる。この自然な構造を活かして、構造を可視化するにはどうしたらよいか。
解C　レイヤ化を行う。
手段ｃ　
1. 責務を中心としてレイヤを定義する。
1. 責務をグループ化して名前を付ける。
1. モデルの中にある概念上の依存関係を調べる
1. ドメインのさまざまな部分の変更について、変化の割合とその原因も調べる。
1. ドメインに自然な階層が認められたら、それに幅広い抽象的な責務を割り当てる。
   それらの責務はシステムの高次の目的と設計をかたるものにする
1．モデルをリファクタリングして、各ドメインオブジェクトと集約およびモジュールの責務が
　 一つのレイヤに与えられた責務に収まるようにする

# 知識レベル
知識レベル：他のオブジェクトグループがどうふるまうべきかを記述するオブジェクトグループ
課題D　リフレクションは変化する要求に対応するために、ソフトウェアを「自覚的にし」、その構造と振る舞いの中から
　　　 特定の側面に対して、適合や変更を行うためにアクセスできるようにする。
解D　アプリケーションのの業務関する責務を持つ「ベースレベル」と、
　　 ソフトウェアの構造と振る舞いに関する知識を表す「メタレベル」に分ける。

課題E　知識レベルを用いることで曖昧さが生み出される。
解E　　プログラマのスキル。
　　　 カスタマイズが決定的に重要な部分に対して慎重に適用する。

結果的に、知識レベルは他の大規模な構造のほとんどと共存することができ、組織に関する付加的な一面を提供する。

# 着脱可能コンポーネントのフレームワーク
課題F　多様なアプリケーションの相互運用が必要で、全てが同一の中小にもづきながら独立して設計されている場合、
　　 　複数の境界付けられたコンテキスト間で変換しなければならないために、統合が制限されてしまう。
解F　　インターフェースや相互作用になる抽象化されたコアを蒸留し、そのインターフェースの多様な実装を自由に置換できるようにするフレームワークを作成すること。
　 　　同様に、抽象化されたコアのインターフェースを経由してそうされる限り、あらゆるアプリケーションがこのコンポーネントを使用できるようにする
手段F　継続的な統合を行うか、密接に関係するコンポーネントの集合のための共有カーネルを定義できれば、
　　　 複数のコンポーネントを単一のコンテキスト内で開発できる。
問題F　適用できる状況を作るのが難しい。正確なインターフェースの設計。抽象化されたコアの振る舞いを捉えるモデル
　　　 コアドメインと異なる方向性を持つアプリケーションには合わない。

課題G　構造による制約をどの程度厳しくするべきか
解G　　業務オブジェクト等下位層の状態が変化した時に、イベントを生成する。

メモ
1. 継続的なリファクタリングは必須。（最初からモデルの理解は不可能なため）
2. 最初は、システムのメタファや2層の責務レイヤといった緩やかな構造を選択する。
3. 新しい秩序を忠実に守るためにシステム全体の変更を躊躇してはならない。
4. 蒸留も継続的に行う。

